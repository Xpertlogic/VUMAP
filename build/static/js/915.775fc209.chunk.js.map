{"version":3,"file":"static/js/915.775fc209.chunk.js","mappings":"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","sources":["components/Subscription.jsx","../../src/index.ts"],"sourcesContent":["import { useState, useContext, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\nimport { CheckOutlined } from \"@ant-design/icons\";\nimport useRazorpay from \"react-razorpay\";\nimport { LoginContext } from \"../context/LoginContext\";\n\nfunction Subscription({ onSuccess }) {\n  const [paymentSuccess, setPaymentSuccess] = useState(false);\n  const [Razorpay, isLoaded] = useRazorpay();\n  const { userData, storedToken } = useContext(LoginContext);\n\n  const handleCustomAction = () => {\n    window.location.href = \"/contact\";\n  };\n\n  const PricingCard = ({\n    title,\n    price,\n    features,\n    isActive,\n    plan,\n    buttonText,\n    buttonAction,\n  }) => {\n    const handlePayment = async (title, price) => {\n      let plan;\n      switch (title) {\n        case \"Basic Plan\":\n          plan = \"Basic Plan\";\n          break;\n        case \"Business Plan\":\n          plan = \"Business Plan\";\n          break;\n        default:\n          plan = \"Free\";\n          break;\n      }\n\n      let tier;\n      switch (plan) {\n        case \"Basic Plan\":\n          tier = \"tier1\";\n          break;\n        case \"Business Plan\":\n          tier = \"tier2\";\n          break;\n        default:\n          tier = \"free\";\n          break;\n      }\n\n      const amount =\n        parseFloat(\n          price\n            .replace(\"₹\", \"\")\n            .replace(\",\", \"\")\n            .replace(\" / Month\", \"\")\n            .replace(\" /1 Year\", \"\")\n        ) * 100; // Convert price to integer amount in paise\n\n      const options = {\n        key: \"rzp_live_1kJMTrbvXgTw3a\",\n        amount: amount,\n        currency: \"INR\",\n        name: \"Acme Corp\",\n        description: `Subscription for ${plan}`,\n        image: \"\",\n        handler: async (razorpayResponse) => {\n          console.log(razorpayResponse);\n          if (razorpayResponse.razorpay_payment_id) {\n            try {\n              const Payload = {\n                email: userData.email,\n                tier: tier,\n                paymentid: razorpayResponse.razorpay_payment_id,\n                token: storedToken,\n              };\n\n              const headers = {\n                Token: storedToken,\n                \"Content-Type\": \"application/json\",\n              };\n\n              const response = await axios.post(\n                \"http://54.252.180.142:8080/api/user/payments\",\n                Payload,\n                { headers: headers }\n              );\n\n              if (response.status === 200) {\n                setPaymentSuccess(userData.tier !== \"free\");\n                onSuccess();\n              }\n              //here respone.status === 200 hit the verify token api to store the user data and show the subscription susccess pop up\n\n              console.log(\"Payment recorded successfully!\");\n            } catch (error) {\n              console.error(\"Error recording payment:\", error);\n            }\n          } else {\n            console.log(\"somthing went wrong in payments\");\n          }\n        },\n        prefill: {\n          name: userData.username,\n          email: userData.email,\n          contact: userData.phone,\n        },\n        notes: {\n          address: \"Razorpay Corporate Office\",\n        },\n        theme: {\n          color: \"#3399cc\",\n        },\n      };\n\n      const rzpay = new Razorpay(options);\n      rzpay.open();\n    };\n\n    const handleSubscribe = () => {\n      handlePayment(title, price);\n    };\n\n    return (\n      <div className={`card ${isActive ? \"active\" : \"\"}`}>\n        <h3>{title}</h3>\n        <h1>{price}</h1>\n        <ul>\n          {features.map((feature, index) => (\n            <li key={index}>\n              <CheckOutlined /> {feature}\n            </li>\n          ))}\n        </ul>\n        {buttonText && buttonAction ? (\n          <button onClick={buttonAction} className=\"subscribe-link\">\n            {buttonText}\n          </button>\n        ) : (\n          <button onClick={handleSubscribe} className=\"subscribe-link\">\n            Subscribe\n          </button>\n        )}\n        <Link to=\"/terms&condition\" className=\"terms-link\">\n          Terms & Conditions\n        </Link>\n      </div>\n    );\n  };\n\n  return (\n    <section>\n      <header>\n        <h1>Subscription Plan</h1>\n      </header>\n\n      {paymentSuccess ? (\n        <div>\n          <h2>Payment successful!</h2>\n        </div>\n      ) : (\n        <div className=\"wrapper\">\n          <PricingCard\n            title=\"Basic Plan\"\n            price=\"₹299/ Month\"\n            features={[\n              \"All data will visible and user can analyze\",\n              \"Unlimited admin Boundary Downloads (up to postal label)\",\n              \"User can Download 50 leads per category\",\n            ]}\n            isActive={false}\n          />\n          <PricingCard\n            title=\"Business Plan\"\n            price=\"₹2999 /1 Year\"\n            features={[\n              \"All data will visible and user can analyze\",\n              \"Unlimited admin Boundary Downloads(up to Village label)\",\n              \"User can Download 150 leads per category\",\n              \"House Numbers and Roads signs are Exclusive access for Business Plans.\",\n              \"Dedicated Support team.\",\n            ]}\n            isActive={true}\n          />\n          <PricingCard\n            title=\"Enterprise Custom\"\n            price=\"₹Custom\"\n            features={[\n              \"For More Data sets contact our team.\",\n              \"Road line, Rail line, Buildings or any other GIS data sets please, Contact our team.\",\n            ]}\n            isActive={false}\n            buttonText=\"Contact us\"\n            buttonAction={handleCustomAction}\n          />\n        </div>\n      )}\n    </section>\n  );\n}\n\nexport default Subscription;\n"],"names":["_ref","onSuccess","paymentSuccess","setPaymentSuccess","useState","Razorpay","isLoaded","useRazorpay","userData","storedToken","useContext","LoginContext","PricingCard","_ref2","title","price","features","isActive","plan","buttonText","buttonAction","_jsxs","className","concat","children","_jsx","map","feature","index","CheckOutlined","onClick","handleSubscribe","async","tier","options","key","amount","parseFloat","replace","currency","name","description","image","handler","console","log","razorpayResponse","razorpay_payment_id","Payload","email","paymentid","token","headers","Token","axios","post","status","error","prefill","username","contact","phone","notes","address","theme","color","open","handlePayment","Link","to","handleCustomAction","window","location","href","react_1","require","constructor","rzrpayInstannce","on","event","callback","exports","isClient","useMemo","setIsLoaded","checkScriptLoaded","useCallback","loadScript","scriptUrl","Promise","resolve","reject","scriptTag","document","createElement","src","onload","ev","onerror","err","body","appendChild","useEffect","__awaiter","Error"],"sourceRoot":""}